<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BITS F111 Thermodynamics - Tutorial 2 Solutions</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Great+Vibes&family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <!-- KaTeX for Math Rendering (No SRI) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"></script>

    <!-- Plotly.js for Graphs -->
    <script src='https://cdn.plot.ly/plotly-2.32.0.min.js'></script>

    <!-- Embedded CSS -->
    <style>
        /* --- START OF CSS --- */
        /* Basic Reset & Body Style */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; }
        body {
            font-family: 'Lato', sans-serif; /* Base font */
            line-height: 1.7;
            background-color: #1e1e1e; /* Dark background */
            color: #e0e0e0; /* Light text */
            padding: 20px;
        }
        .container { max-width: 950px; margin: 40px auto; background-color: #2a2a2a; padding: 35px; border-radius: 10px; border: 1px solid #444; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4); }
        h1 { font-family: 'Great Vibes', cursive; color: #f5f5f5; text-align: center; font-size: 3.5em; font-weight: 400; margin-bottom: 40px; padding-bottom: 15px; border-bottom: 1px solid #555; letter-spacing: 1px; }
        /* Question Styling */
        .question-container { background-color: #2f2f2f; border: 1px solid #4a4a4a; border-radius: 8px; margin-bottom: 30px; padding: 25px; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3); transition: box-shadow 0.3s ease, border-color 0.3s ease; }
        .question-container:hover { border-color: #666; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4); }
        .question-container h2 { font-family: 'Abril Fatface', serif; color: #e74c3c; margin-bottom: 20px; font-size: 1.8em; border-left: 5px solid #c0392b; padding-left: 15px; font-weight: 400; letter-spacing: 0.5px; }
        .question-text p { margin-bottom: 12px; }
        .question-text ul { margin-left: 25px; margin-bottom: 12px; list-style: disc; }
        /* Solution Block Styling */
        .solution-block { margin-top: 20px; padding-top: 20px; border-top: 1px dashed #555; }
        .toggle-button { display: inline-block; background-color: #c0392b; color: #f0f0f0; padding: 11px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: bold; letter-spacing: 0.5px; transition: background-color 0.3s ease, transform 0.2s ease; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); }
        .toggle-button:hover { background-color: #a93226; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); }
        /* Solution content area */
        .solution-content { background-color: #353535; border: 1px solid #505050; border-radius: 6px; padding: 0; max-height: 0; overflow: hidden; opacity: 0; transition: max-height 0.7s cubic-bezier(0.65, 0, 0.35, 1), padding 0.7s ease, opacity 0.5s ease-in-out; }
        .solution-content.visible { padding: 25px; max-height: 5000px; opacity: 1; }
        .answer { margin-bottom: 20px; padding: 15px; background-color: #3f3f3f; border-left: 5px solid #c0392b; border-radius: 4px; }
        .answer strong { color: #e74c3c; display: block; margin-bottom: 8px; font-size: 1.1em; }
        .solution { padding-top: 10px; }
        .solution strong { color: #f0f0f0; font-weight: bold; }
        .solution ol, .solution ul { margin-left: 30px; margin-top: 12px; margin-bottom: 12px; }
        .solution ol li, .solution ul li { margin-bottom: 10px; }
        .solution p { margin-bottom: 12px; }
        /* KaTeX Math Formatting */
        .katex { font-size: 1.1em; color: #ffffff !important; }
        .katex .mfrac > span > span { border-top-color: #ffffff !important; }
        /* Plotly Graph Styling */
        .plot-container { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; margin-bottom: 20px; justify-content: space-around; }
        .plot-container-single { margin-top: 20px; margin-bottom: 20px; display: flex; justify-content: center; }
        .plot { flex: 1 1 380px; max-width: 450px; min-height: 380px; border: 1px solid #444; border-radius: 4px; background-color: #1e1e1e; overflow: hidden; }
        .plot-container-single .plot { flex-grow: 0; width: 90%; max-width: 500px; }
         @media (max-width: 768px) {
             .plot-container { flex-direction: column; align-items: center; }
             .plot { width: 95%; flex-basis: auto; }
              .plot-container-single .plot { width: 95%; }
         }
        /* --- END OF CSS --- */
    </style>
</head>
<body>

    <div class="container">
        <h1>Thermodynamics Tutorial II</h1>

         <!-- Question 1 -->
         <div class="question-container">
             <h2>Question 1</h2>
            <div class="question-text">
                <p>Determine the entropy for these states.</p>
                <p>(a) Nitrogen, P = 2000 kPa, 120 K</p>
                 <p>(b) Nitrogen, 120 K, v = 0.0050 m³/kg</p>
                 <p>(c) R-410A, T = 25°C, v = 0.01 m³/kg</p>
                 <p>Represent the states on P-v and T-s diagram.</p>
             </div>
            <div class="solution-block">
                <button class="toggle-button">Show Answer & Solution</button>
                <div class="solution-content">
                     <div class="answer">
                         <strong>Answers (Using Provided Tables):</strong>
                         <p>(a) N2, P=2000kPa, T=120K (Table B.6.2): $s = 5.6753$ kJ/kg·K (Superheated Vapor)</p>
                         <p>(b) N2, T=120K, v=0.0050 (Table B.6.1): $s \approx 4.4207$ kJ/kg·K (Saturated Mixture, $x \approx 0.7407$)</p>
                         <p>(c) R-410A, T=25°C, v=0.01 (Table B.4.1): $s \approx 0.7575$ kJ/kg·K (Saturated Mixture, $x \approx 0.6286$)</p>
                         <p><em>Note: Value for 1(c) is significantly different from previous non-PDF table calculation, confirming B.4.1 reference state or values differ. N2 also differs.</em></p>
                     </div>
                     <div class="solution">
                         <strong>Solution Methodology:</strong>
                          <p>Determine the phase by comparing given properties with saturation properties from tables (Appendix B: B.6 for N2, B.4.1 for R-410A). Look up entropy in the appropriate table or calculate using quality ($x=(v-v_f)/v_{fg}$) and entropy ($s=s_f+x s_{fg}$) for mixtures.</p>
                        <p><strong>(a) Nitrogen, P = 2000 kPa, T = 120 K</strong></p>
                        <ol>
                            <li>From B.6.1, $P_{sat} @ 120$ K $= 2513.0$ kPa.</li>
                             <li>Since $P (2000) < P_{sat}$, state is Superheated Vapor.</li>
                             <li>From B.6.2, @ P=2.0 MPa, T=120 K, $s = 5.6753$ kJ/kg·K.</li>
                        </ol>
                         <p><strong>(b) Nitrogen, T = 120 K, v = 0.0050 m³/kg</strong></p>
                        <ol>
                             <li>From B.6.1 @ 120 K: $v_f = 0.001915, v_g = 0.00608 \implies v_{fg}=0.004165$.</li>
                             <li>Since $v_f < v < v_g$, it's a Mixture.</li>
                             <li>$x = (0.0050 - 0.001915) / 0.004165 \approx 0.7407$.</li>
                             <li>From B.6.1: $s_f = 3.8536, s_g = 4.6195 \implies s_{fg}=0.7659$. $s = 3.8536 + 0.7407(0.7659) \approx 4.4207$ kJ/kg·K.</li>
                        </ol>
                         <p><strong>(c) R-410A, T = 25°C, v = 0.01 m³/kg</strong></p>
                        <ol>
                             <li>From B.4.1 @ 25°C: $v_f = 0.000944, v_g = 0.01535 \implies v_{fg}=0.014406$.</li>
                            <li>Since $v_f < v < v_g$, it's a Mixture.</li>
                             <li>$x = (0.01 - 0.000944) / 0.014406 \approx 0.6286$.</li>
                             <li>From B.4.1: $s_f = 0.3631, s_g = 0.9884 \implies s_{fg}=0.6253$. $s = 0.3631 + 0.6286(0.6253) \approx 0.7575$ kJ/kg·K.</li>
                         </ol>
                         <p><strong>Diagrams (Illustrative):</strong></p>
                        <div class="plot-container">
                            <div id="q1-pv-diagram" class="plot"></div>
                            <div id="q1-ts-diagram" class="plot"></div>
                        </div>
                    </div>
                 </div>
            </div>
         </div>

        <!-- Question 2 -->
        <div class="question-container">
             <h2>Question 2</h2>
             <div class="question-text">
                 <p>Two kilograms of water at 200 kPa with a quality of 25% has its temperature raised by 20°C in a constant-pressure process. What is the change in entropy? Represent the process on P-v and T-s diagram.</p>
           </div>
            <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                <div class="solution-content">
                     <div class="answer">
                        <strong>Answer (Using Provided Tables B.1):</strong>
                        <p>The total change in entropy, $\Delta S = m(s_2 - s_1) \approx 2 (7.2295 - 2.9293) \approx 8.600$ kJ/K.</p>
                    </div>
                    <div class="solution">
                        <strong>Solution Methodology:</strong>
                        <p>Constant pressure process. Find state 1 (Sat. Mix @ 200 kPa, x=0.25) and state 2 (Superheated @ 200 kPa, $T_2=T_{sat,1}+20^\circ C$). Use Tables B.1.2 and B.1.3.</p>
                        <ol>
                             <li>State 1 (B.1.2): $P_1=200$kPa, $T_1=T_{sat}=120.23^\circ$C. $s_{f1}=1.5301$, $s_{fg1}=5.5967$. $s_1 = s_f + x s_{fg} = 1.5301 + 0.25(5.5967) = 2.9293$ kJ/kg·K.</li>
                            <li>State 2: $P_2=200$kPa, $T_2=120.23 + 20 = 140.23^\circ$C. This is superheated. Interpolate in B.1.3 @ 200kPa between $T_{sat}=120.23$ ($s_g=7.1271$) and $T=150$ ($s=7.2795$). $s_2 \approx 7.2295$ kJ/kg·K.</li>
                             <li>Entropy Change: $\Delta S = m(s_2 - s_1) = 2(7.2295 - 2.9293) = 8.600$ kJ/K.</li>
                        </ol>
                         <p><strong>Diagrams (Illustrative):</strong></p>
                         <div class="plot-container">
                             <div id="q2-pv-diagram" class="plot"></div>
                             <div id="q2-ts-diagram" class="plot"></div>
                         </div>
                     </div>
                </div>
             </div>
         </div>

        <!-- Question 3 -->
        <div class="question-container">
             <h2>Question 3</h2>
             <div class="question-text">
                 <p>In a Carnot engine with ammonia as the working fluid, the high temperature is 60°C and as QH is received, the ammonia changes from saturated liquid to saturated vapor. The ammonia pressure at the low temperature is 190 kPa. Find TL, the cycle thermal efficiency, the heat added per kilogram, and the entropy, s, at the beginning of the heat rejection process. Represent the cycle on the T-s diagram.</p>
            </div>
            <div class="solution-block">
                <button class="toggle-button">Show Answer & Solution</button>
                <div class="solution-content">
                    <div class="answer">
                        <strong>Answers (Using Provided Table B.2.1):</strong>
                        <p>$T_L = T_{sat} @ 190 \text{kPa} \approx -20^\circ$C = 253.15 K (Value @ 190.2kPa used).</p>
                        <p>$\eta_{th} = 1 - T_L/T_H = 1 - 253.15 / (60+273.15) \approx 0.2401$ (24.0%).</p>
                        <p>$q_H = h_{fg} @ 60^\circ C = 997.0$ kJ/kg.</p>
                        <p>$s_3 = s_g @ 60^\circ C = 4.8551$ kJ/kg·K.</p>
                    </div>
                     <div class="solution">
                        <strong>Solution Methodology:</strong>
                         <p>Carnot cycle. Use Table B.2.1 for Ammonia saturation properties.</p>
                        <ol>
                            <li>High Temperature $T_H=60^\circ$C = 333.15 K. Heat addition 1->2 is sat liq -> sat vap at $T_H$.</li>
                             <li>Low Temperature $T_L$ corresponds to the saturation temperature at the rejection pressure $P_L=190$ kPa. From B.2.1, $T_{sat}$ at 190.2 kPa is -20°C (253.15 K).</li>
                             <li>Carnot efficiency $\eta_{th} = 1 - T_L/T_H$.</li>
                             <li>Heat added per kg during phase change at constant T & P is $q_H = h_{fg}$ at $T_H$.</li>
                            <li>Entropy at start of heat rejection (State 3) is $s_3 = s_2 = s_g$ at $T_H$ (isentropic expansion 2->3).</li>
                        </ol>
                        <p><strong>T-s Diagram (Illustrative):</strong></p>
                         <div class="plot-container-single">
                           <div id="q3-ts-diagram" class="plot"></div>
                         </div>
                    </div>
                </div>
             </div>
        </div>

        <!-- Question 4 -->
        <div class="question-container">
             <h2>Question 4</h2>
             <div class="question-text">
                 <p>A piston/cylinder maintaining constant pressure contains 0.1 kg saturated liquid water at 125°C. It is now boiled to become saturated vapor in a reversible process. Find the work term and then the heat transfer from the energy equation. Find the heat transfer from the entropy equation; is it the same?</p>
             </div>
            <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                <div class="solution-content">
                     <div class="answer">
                         <strong>Answers (Using Provided Table B.1.1 @ 125°C):</strong>
                         <p>Work $W = m P (v_g - v_f) \approx 17.85$ kJ.</p>
                        <p>$Q$ (Energy Eq) = $m h_{fg} = 0.1 \times (2713.46 - 524.96) = 218.85$ kJ.</p>
                        <p>$Q$ (Entropy Eq) = $m T s_{fg} = 0.1 \times (398.15) \times (7.0774 - 1.5812) = 223.42$ kJ.</p>
                        <p>They are slightly different (~2%), due to separate correlations used for generating $h$ and $s$ in tables.</p>
                    </div>
                     <div class="solution">
                        <strong>Solution Methodology:</strong>
                        <p>Constant pressure reversible boiling. Use Table B.1.1 @ T=125°C.</p>
                         <ol>
                            <li>Properties: $P=P_{sat}=232.1$kPa, T=398.15 K. $v_f=0.001065, v_g=0.77059$. $h_f=524.96, h_g=2713.46$. $s_f=1.5812, s_g=7.0774$. m=0.1kg.</li>
                             <li>Work: $W = m P (v_g-v_f) = 0.1(232.1)(0.77059-0.001065) = 17.85$ kJ.</li>
                            <li>Q Energy: $Q_E = m(h_g-h_f) = m h_{fg} = 0.1(2188.50) = 218.85$ kJ.</li>
                            <li>Q Entropy: $Q_S = m T (s_g-s_f) = m T s_{fg} = 0.1(398.15)(5.4962) = 223.42$ kJ.</li>
                            <li>Comparison: $Q_E \neq Q_S$. Use $Q=m h_{fg}$ for constant pressure phase change calculations generally.</li>
                        </ol>
                         <p><strong>Diagram Representation (Illustrative):</strong></p>
                         <div class="plot-container">
                            <div id="q4-pv-diagram" class="plot"></div>
                             <div id="q4-ts-diagram" class="plot"></div>
                         </div>
                     </div>
                 </div>
            </div>
        </div>

        <!-- Question 5 -->
        <div class="question-container">
             <h2>Question 5</h2>
             <div class="question-text">
                 <p>A piston/cylinder contains 2 kg water at 200°C, 10 MPa. The piston is slowly moved to expand the water in an isothermal process to a pressure of 200 kPa. Any heat transfer takes place with an ambient at 200°C and the whole process may be assumed reversible. Calculate both heat transfer and the total work and then represent the process on P-v and T-s diagrams.</p>
            </div>
             <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                <div class="solution-content">
                     <div class="answer">
                         <strong>Answers (Using Provided Tables B.1):</strong>
                        <p>Heat Transfer, $Q = m T (s_2-s_1) \approx 4910.2$ kJ.</p>
                        <p>Total Work, $W = Q - m(u_2-u_1) \approx 1288.2$ kJ.</p>
                         <p><em>State 1(B.1.4 CL @ 10MPa, 200C): $u_1=843.60, s_1=2.3178$. State 2(B.1.3 SH @ 200kPa, 200C): $u_2=2654.6, s_2=7.5066$. T=473.15K.</em></p>
                    </div>
                    <div class="solution">
                        <strong>Solution Methodology:</strong>
                         <p>Reversible isothermal expansion. Find properties for State 1 (CL) and State 2 (SH). Calculate Q via entropy, W via First Law.</p>
                        <ol>
                             <li>State 1: Table B.1.4 @ 10 MPa, 200°C. $u_1=843.60$ kJ/kg, $s_1=2.3178$ kJ/kg·K.</li>
                            <li>State 2: Table B.1.3 @ 200 kPa, 200°C. $u_2=2654.6$ kJ/kg, $s_2=7.5066$ kJ/kg·K.</li>
                            <li>$T=200^\circ$C = 473.15 K. Mass $m=2$ kg.</li>
                            <li>Heat Transfer: $Q = T \Delta S = m T (s_2-s_1) = 2(473.15)(7.5066 - 2.3178) = 946.3(5.1888) = 4910.16$ kJ.</li>
                            <li>Work: $W = Q - \Delta U = Q - m(u_2-u_1) = 4910.16 - 2(2654.6 - 843.60) = 4910.16 - 3622.0 = 1288.16$ kJ.</li>
                        </ol>
                        <p><strong>Diagrams (Illustrative):</strong></p>
                        <div class="plot-container">
                           <div id="q5-pv-diagram" class="plot"></div>
                            <div id="q5-ts-diagram" class="plot"></div>
                        </div>
                    </div>
                 </div>
            </div>
        </div>

        <!-- Question 6 -->
        <div class="question-container">
            <h2>Question 6</h2>
            <div class="question-text">
                 <p>A 4 kg piece of steel at 250°C and a 3 kg block of aluminum at 25°C, come in thermal contact. Find the final temperature and the change in entropy of the steel and aluminum.</p>
             </div>
            <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                <div class="solution-content">
                    <div class="answer">
                        <strong>Answers (Using Table A.3 values):</strong>
                         <p>Final Temperature, $T_2 \approx 116.2^\circ$C (389.3 K).</p>
                         <p>Entropy Change Steel, $\Delta S_{st} \approx -0.5437$ kJ/K.</p>
                         <p>Entropy Change Aluminum, $\Delta S_{al} \approx +0.7201$ kJ/K.</p>
                     </div>
                     <div class="solution">
                        <strong>Solution Methodology:</strong>
                         <p>Isolated system energy balance $m_{st}C_{st}(T_2-T_{1,st}) + m_{al}C_{al}(T_2-T_{1,al})=0$. Use $C_p$ from Table A.3 (Steel: $C_{st}=0.46$, Aluminum: $C_{al}=0.90$). Calculate $T_2$. Calculate $\Delta S = m C \ln(T_2/T_1)$ for each.</p>
                         <ol>
                             <li>Temperatures: $T_{1,st}=250^\circ$C=523.15 K, $T_{1,al}=25^\circ$C=298.15 K. Masses: $m_{st}=4$kg, $m_{al}=3$kg.</li>
                            <li>Energy Balance: $4(0.46)(T_2-523.15) + 3(0.90)(T_2-298.15) = 0 \implies 1.84T_2 - 962.6 + 2.7T_2 - 804.9 = 0 \implies 4.54T_2=1767.5 \implies T_2 \approx 389.3$ K (116.2°C).</li>
                             <li>Entropy Change Steel: $\Delta S_{st} = 4(0.46)\ln(389.3/523.15) \approx -0.5437$ kJ/K.</li>
                            <li>Entropy Change Aluminum: $\Delta S_{al} = 3(0.90)\ln(389.3/298.15) \approx +0.7201$ kJ/K.</li>
                            <li>Total $\Delta S = \Delta S_{st} + \Delta S_{al} = 0.1764$ kJ/K (>0, irreversible).</li>
                         </ol>
                     </div>
                 </div>
            </div>
        </div>

        <!-- Question 7 -->
        <div class="question-container">
            <h2>Question 7</h2>
             <div class="question-text">
                 <p>A 50 kg block of iron at 500 K is placed into open atmosphere which is at a temperature of 285 K. The iron block eventually reaches thermal equilibrium with the atmosphere. Assuming an average specific heat capacity of 0.45 kJ/kg K for iron, determine the entropy change for (a) the iron block, (b) the atmosphere.</p>
             </div>
            <div class="solution-block">
                <button class="toggle-button">Show Answer & Solution</button>
                <div class="solution-content">
                     <div class="answer">
                         <strong>Answers (Using C=0.45 kJ/kgK as given):</strong>
                         <p>(a) Iron Block: $\Delta S_{iron} = m C \ln(T_2/T_1) = 50(0.45)\ln(285/500) \approx -12.65$ kJ/K.</p>
                         <p>(b) Atmosphere: Heat transferred $Q_{to\_atm} = m C (T_1-T_2) = 50(0.45)(500-285) = 4837.5$ kJ. $\Delta S_{atm} = Q_{to\_atm}/T_{atm} = 4837.5/285 \approx +16.97$ kJ/K.</p>
                    </div>
                     <div class="solution">
                        <strong>Solution Methodology:</strong>
                        <p>Calculate entropy change for the cooling iron block using the given C. Calculate heat transfer $Q$ to the atmosphere (reservoir at constant T). Calculate atmosphere's entropy change using $\Delta S_{atm}=Q/T_{atm}$.</p>
                        <ol>
                             <li>$\Delta S_{iron} = mC \ln(T_{final}/T_{initial})$. $T_{final}=285$ K, $T_{initial}=500$ K. $\Delta S_{iron} = (50)(0.45)\ln(285/500) = -12.65$ kJ/K.</li>
                             <li>$Q$ transferred from iron = $mC(T_{initial}-T_{final}) = 50(0.45)(500-285) = 4837.5$ kJ.</li>
                            <li>$\Delta S_{atm} = Q / T_{atm} = +4837.5 / 285 = +16.97$ kJ/K.</li>
                             <li>Total entropy generation = $\Delta S_{iron} + \Delta S_{atm} = -12.65 + 16.97 = +4.32$ kJ/K.</li>
                         </ol>
                    </div>
                 </div>
            </div>
         </div>

        <!-- Question 8 -->
        <div class="question-container">
            <h2>Question 8</h2>
             <div class="question-text">
                <p>R-410A at 300 kPa, 20°C is brought to 220°C in a constant-volume process. Evaluate the change in specific entropy using Table B.4 and using ideal gas with $C_v = 0.695$ kJ/kg K.</p>
             </div>
            <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                 <div class="solution-content">
                    <div class="answer">
                        <strong>Answers (Using B.4.2 and given Cv):</strong>
                        <p>Table B.4: $\Delta s = s_2 - s_1 \approx 1.5159 - 1.2741 = 0.2418$ kJ/kg·K.</p>
                         <p>Ideal Gas ($C_v=0.695$): $\Delta s = C_v \ln(T_2/T_1) = 0.695 \ln(493.15/293.15) \approx 0.3613$ kJ/kg·K.</p>
                    </div>
                    <div class="solution">
                         <strong>Solution Methodology:</strong>
                        <p>Constant volume process. Find state 1 (300kPa, 20C) properties ($s_1, v_1$) from B.4.2 (Superheated). State 2 is ($T_2=220$C, $v_2=v_1$). Interpolate in B.4.2 to find $s_2$. Calculate $\Delta s_{table}=s_2-s_1$. Compare with ideal gas calculation $\Delta s_{ideal}=C_v \ln(T_2/T_1)$.</p>
                         <ol>
                             <li>State 1 (B.4.2): P=300, T=20 -> $v_1=0.10886, s_1=1.2741$.</li>
                             <li>State 2: T=220, v=0.10886. Interpolate s vs v at T=220C using P=400 (v=0.12157, s=1.5370) and P=500 (v=0.09438, s=1.4918). Found $s_2 \approx 1.5159$.</li>
                             <li>Table Change: $\Delta s_{table} = 1.5159 - 1.2741 = 0.2418$ kJ/kgK.</li>
                            <li>Ideal Gas Change: $\Delta s_{ideal} = 0.695 \ln((220+273.15)/(20+273.15)) = 0.695 \ln(493.15/293.15) = 0.3613$ kJ/kgK.</li>
                         </ol>
                     </div>
                 </div>
            </div>
        </div>

         <!-- Question 9 -->
         <div class="question-container">
             <h2>Question 9</h2>
             <div class="question-text">
                <p>Oxygen gas in a piston/cylinder at 300 K, 100 kPa with a volume of 0.1 m³ is compressed in a reversible adiabatic process to a final temperature of 700 K. Find the final pressure and volume using Table A.5 and repeat the process with Table A.8.</p>
             </div>
             <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                 <div class="solution-content">
                     <div class="answer">
                        <strong>Answers (Using Tables A.5 & A.8 for O2):</strong>
                        <p>Using Table A.5 (Constant $k = 1.393$): $P_2 \approx 2287$ kPa, $V_2 \approx 0.0102$ m³.</p>
                         <p>Using Table A.8 (Variable $C_p$, $s^0$): $P_2 \approx 4442$ kPa, $V_2 \approx 0.00525$ m³.</p>
                    </div>
                     <div class="solution">
                        <strong>Solution Methodology:</strong>
                         <p>Reversible adiabatic = Isentropic ($\Delta s = 0$). Ideal gas O2. Mass $m=P_1V_1/RT_1$.
                         (1) Constant Specific Heats (Table A.5): Use $k=1.393$. Calculate $P_2 = P_1(T_2/T_1)^{k/(k-1)}$ and $V_2 = V_1(T_1/T_2)^{1/(k-1)}$.
                         (2) Variable Specific Heats (Table A.8): Use $s_2-s_1 = 0 = s^0(T_2) - s^0(T_1) - R\ln(P_2/P_1)$. Calculate $P_2$. Use $V_2=mRT_2/P_2$.</p>
                        <ol>
                            <li>Properties (A.5): R=0.2598. Mass $m = (100*0.1)/(0.2598*300) = 0.1283$ kg.</li>
                            <li>Method 1 (A.5, k=1.393): $P_2 = 100(700/300)^{3.5445} \approx 2287$ kPa. $V_2 = 0.1(300/700)^{2.5445} \approx 0.0102$ m³.</li>
                            <li>Method 2 (A.8): $s^0(300)=6.4168$, $s^0(700)=7.4024$ kJ/kg·K. $0 = (7.4024 - 6.4168) - 0.2598 \ln(P_2/100) \implies \ln(P_2/100)=3.7937 \implies P_2 \approx 4442$ kPa. $V_2 = (0.1283)(0.2598)(700)/4442 \approx 0.00525$ m³.</li>
                         </ol>
                     </div>
                </div>
            </div>
        </div>

        <!-- Question 10 -->
        <div class="question-container">
            <h2>Question 10</h2>
             <div class="question-text">
                <p>A cylinder/piston contains 1 kg of methane gas at 100 kPa, 20°C. The gas is compressed reversibly to a pressure of 800 kPa. Assuming methane as an ideal gas with constant heat capacities, calculate the work required if the process is adiabatic.</p>
             </div>
             <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                 <div class="solution-content">
                    <div class="answer">
                         <strong>Answer (Using Table A.5 for CH4):</strong>
                         <p>Work Required (Input), $W_{in} = -W \approx 351.9$ kJ</p>
                    </div>
                     <div class="solution">
                         <strong>Solution Methodology:</strong>
                         <p>Reversible adiabatic (isentropic) compression, ideal gas CH4 ($m=1$ kg), constant properties from A.5 ($C_v=1.736, k=1.299$). Find $T_2$ using $T_2/T_1=(P_2/P_1)^{(k-1)/k}$. Use $W = -m C_v (T_2-T_1)$ since $Q=0$.</p>
                         <ol>
                            <li>$T_1 = 20+273.15 = 293.15$ K. $P_1=100$ kPa, $P_2=800$ kPa.</li>
                             <li>$(k-1)/k = (1.299-1)/1.299 \approx 0.23018$.</li>
                             <li>$T_2 = 293.15 \times (800/100)^{0.23018} = 293.15 \times 8^{0.23018} \approx 293.15 \times 1.691 \approx 495.9$ K.</li>
                             <li>$W = -m C_v (T_2-T_1) = -1(1.736)(495.9-293.15) \approx -351.9$ kJ. Work required is $-W = 351.9$ kJ.</li>
                         </ol>
                     </div>
                </div>
             </div>
         </div>

         <!-- Question 11 -->
         <div class="question-container">
             <h2>Question 11</h2>
             <div class="question-text">
                 <p>One kilogram of ammonia (NH3) is contained in a spring-loaded piston/ cylinder...as saturated liquid at -20°C. Heat is added from a reservoir at 100°C until a final condition of 800 kPa, 70°C is reached. Find the work, heat transfer, and entropy generation, assuming the process is internally reversible. Represent the process on P-v diagram.</p>
             </div>
             <div class="solution-block">
                <button class="toggle-button">Show Answer & Solution</button>
                 <div class="solution-content">
                     <div class="answer">
                        <strong>Answers (Using Provided Tables B.2):</strong>
                         <p>Work, $W \approx 96.87$ kJ.</p>
                         <p>Heat Transfer, $Q \approx 1453.9$ kJ.</p>
                        <p>Entropy Generation, $S_{gen} \approx 1.156$ kJ/K.</p>
                     </div>
                     <div class="solution">
                         <strong>Solution Methodology:</strong>
                        <p>Linear P-V process (spring). Find properties for S1(Sat Liq, -20C from B.2.1) and S2(SH, 800kPa, 70C from B.2.2). Calculate work $W = m \int P dv = m (P_1+P_2)/2 \times (v_2-v_1)$. Use First Law $Q=m(u_2-u_1)+W$. Entropy balance $S_{gen}=\Delta S_{sys} - Q/T_{res}$.</p>
                         <ol>
                             <li>S1 (B.2.1 @ -20C): P1=190.2 kPa, v1=0.001504, u1=88.76, s1=0.3657.</li>
                             <li>S2 (B.2.2 @ 800kPa, 70C): v2=0.19716, u2=1445.8, s2=5.4176. m=1kg.</li>
                            <li>Work: $W = 1 \times (190.2+800)/2 \times (0.19716 - 0.001504) = 495.1 \times 0.195656 \approx 96.87$ kJ.</li>
                             <li>Heat: $\Delta U = 1(1445.8 - 88.76) = 1357.04$ kJ. $Q = 1357.04 + 96.87 = 1453.91$ kJ.</li>
                             <li>Entropy Gen: $T_{res}=100^\circ C = 373.15$ K. $\Delta S_{sys} = 1(5.4176-0.3657)=5.0519$ kJ/K. $S_{gen} = \Delta S_{sys} - Q/T_{res} = 5.0519 - 1453.91/373.15 \approx 5.0519 - 3.8961 \approx 1.156$ kJ/K.</li>
                        </ol>
                         <p><strong>P-v Diagram (Illustrative):</strong></p>
                         <div class="plot-container-single">
                           <div id="q11-pv-diagram" class="plot"></div>
                         </div>
                     </div>
                </div>
             </div>
        </div>

        <!-- Question 12 -->
        <div class="question-container">
            <h2>Question 12</h2>
             <div class="question-text">
                 <p>One kilogram of air at 300 K is mixed with one kg air at 400 K in a process at a constant 100 kPa and Q = 0. Find the final T and the entropy generation in the process, assuming the process is internally reversible and specific heats remains constant during the process.</p>
             </div>
            <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                <div class="solution-content">
                     <div class="answer">
                        <strong>Answers (Using Provided Table A.5 for Air $C_p=1.004$):</strong>
                        <p>Final Temperature, $T_2 = 350$ K</p>
                        <p>Entropy Generation, $S_{gen} = \Delta S_{total} \approx 0.0207$ kJ/K</p>
                     </div>
                    <div class="solution">
                         <strong>Solution Methodology:</strong>
                         <p>Adiabatic ($Q=0$), constant P mixing. Use energy balance $H_{in}=H_{out}$ assuming ideal gas air with constant $C_p=1.004$ from A.5. Calculate entropy change for each initial mass to the final state. $\Delta S = m C_p \ln(T_2/T_1)$ for const P. $S_{gen}=\Delta S_A + \Delta S_B$.</p>
                        <ol>
                            <li>Energy Bal: $m_A C_p T_{1A} + m_B C_p T_{1B} = (m_A+m_B) C_p T_2 \implies 1(300) + 1(400) = 2(T_2) \implies T_2=350$ K.</li>
                            <li>Entropy Gen: $\Delta S_A = 1(1.004)\ln(350/300) \approx +0.1548$ kJ/K. $\Delta S_B = 1(1.004)\ln(350/400) \approx -0.1341$ kJ/K. $S_{gen} = 0.1548 - 0.1341 = 0.0207$ kJ/K.</li>
                        </ol>
                     </div>
                </div>
            </div>
        </div>

        <!-- Question 13 -->
        <div class="question-container">
            <h2>Question 13</h2>
             <div class="question-text">
                 <p>A room at 22°C is heated electrically with 1500 W to keep a steady temperature. The outside ambient air is at 5°C. Find the flux of S (= Q/T) into the room air, into the ambient, and the rate of entropy generation.</p>
            </div>
             <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                 <div class="solution-content">
                    <div class="answer">
                        <strong>Answers:</strong>
                        <p>Entropy flux into room air $\dot{S}_{in\_room} = \dot{Q}_{in}/T_{room} = 1500 W / (22+273.15)K \approx 5.08$ W/K.</p>
                        <p>Entropy flux into ambient $\dot{S}_{in\_amb} = \dot{Q}_{loss}/T_{amb} = 1500 W / (5+273.15)K \approx 5.39$ W/K.</p>
                         <p>Rate of entropy generation $\dot{S}_{gen} = \dot{S}_{in\_amb} \approx 5.39$ W/K.</p>
                    </div>
                    <div class="solution">
                        <strong>Solution Methodology:</strong>
                        <p>Steady state implies heat input from heater ($\dot{Q}_{in}=1500$ W) equals heat loss to ambient ($\dot{Q}_{loss}=1500$ W). $T_{room}=295.15$ K, $T_{amb}=278.15$ K. Entropy flux $\dot{S}=\dot{Q}/T$. Entropy generation rate $\dot{S}_{gen}$ from overall balance.</p>
                        <ol>
                            <li>$\dot{S}_{in\_room}$ = Rate of entropy generated by heater dissipating work into heat at $T_{room} = 1500/295.15 = 5.08$ W/K.</li>
                             <li>$\dot{S}_{in\_amb}$ = Rate of entropy received by ambient = $\dot{Q}_{loss}/T_{amb} = 1500/278.15 = 5.39$ W/K.</li>
                             <li>$\dot{S}_{gen}$ = Total rate for Room+Heater+Walls system. $\frac{dS_{CV}}{dt} = 0 = -\frac{\dot{Q}_{loss}}{T_{amb}} + \dot{S}_{gen} \implies \dot{S}_{gen} = \frac{1500}{278.15} = 5.39$ W/K.</li>
                         </ol>
                    </div>
                 </div>
             </div>
        </div>

        <!-- Question 14 -->
         <div class="question-container">
            <h2>Question 14</h2>
            <div class="question-text">
                 <p>A device brings 2 kg of ammonia from 150 kPa, -20°C to 400 kPa, 80°C in a polytropic process. Find the polytropic exponent n, the work, and the heat transfer, assuming the process is internally reversible. Find the total entropy generated, assuming a source at 100°C.</p>
            </div>
             <div class="solution-block">
                 <button class="toggle-button">Show Answer & Solution</button>
                 <div class="solution-content">
                    <div class="answer">
                         <strong>Answers (Using Provided Table B.2):</strong>
                         <p>Polytropic Exponent, $n \approx 1.413$.</p>
                         <p>Work, $W \approx -203.5$ kJ (Input).</p>
                        <p>Heat Transfer, $Q \approx 130.5$ kJ (Input).</p>
                        <p>Total Entropy Generation, $S_{gen,total} = \Delta S_{sys} + \Delta S_{source} \approx -0.0851$ kJ/K.</p>
                         <p><strong>Note:</strong> The negative entropy generation violates the Second Law, indicating an inconsistency in the problem's end states achievable via this process or the given source condition.</p>
                    </div>
                     <div class="solution">
                         <strong>Solution Methodology:</strong>
                         <p>Internally reversible polytropic ($Pv^n=C$). Find states 1 (150kPa, -20C SH) & 2 (400kPa, 80C SH) using B.2.2. Calculate $n$, W, Q, and $S_{gen}$. $T_{source}=100^\circ$C = 373.15 K.</p>
                         <ol>
                             <li>State 1: $v_1=0.84417, u_1=1302.0, s_1=5.7783$. State 2: $v_2=0.42165, u_2=1469.0, s_2=5.9106$. m=2kg.</li>
                            <li>$n = \ln(P_1/P_2) / \ln(v_2/v_1) = \ln(150/400)/\ln(0.42165/0.84417) \approx 1.413$.</li>
                            <li>$W = m (P_2 v_2 - P_1 v_1) / (1-n) = 2[(400)(0.42165)-(150)(0.84417)]/(1-1.413) \approx -203.5$ kJ.</li>
                             <li>$Q = \Delta U + W = m(u_2-u_1) + W = 2(1469.0 - 1302.0) - 203.5 = 334.0 - 203.5 = 130.5$ kJ.</li>
                             <li>$\Delta S_{sys} = m(s_2-s_1) = 2(5.9106-5.7783)=0.2646$ kJ/K. $\Delta S_{source} = -Q/T_{source} = -130.5/373.15 \approx -0.3497$ kJ/K.</li>
                             <li>$S_{gen,total} = \Delta S_{sys} + \Delta S_{source} \approx 0.2646 - 0.3497 = -0.0851$ kJ/K.</li>
                         </ol>
                     </div>
                 </div>
             </div>
         </div>


    </div> <!-- End container -->

    <!-- Embedded JavaScript -->
    <script>
        /* --- START OF TOGGLE SCRIPT --- */
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButtons = document.querySelectorAll('.toggle-button');

            toggleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const solutionContent = this.nextElementSibling;
                    const isVisible = solutionContent.classList.contains('visible');
                    if (!isVisible) {
                        solutionContent.classList.add('visible');
                        this.textContent = 'Hide Answer & Solution';
                    } else {
                        solutionContent.classList.remove('visible');
                        this.textContent = 'Show Answer & Solution';
                    }
                });
            });

            // Initialize KaTeX rendering after DOM is ready
            try {
                 if (typeof renderMathInElement === 'function') {
                    renderMathInElement(document.body, {
                        delimiters: [
                            {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false},
                            {left: '\\(', right: '\\)', display: false}, {left: '\\[', right: '\\]', display: true}
                        ]
                    });
                 } else { console.error("KaTeX auto-render function not found on initial load."); }
            } catch (e) { console.error("Initial KaTeX rendering failed:", e); }

             // Initialize Plotly graphs after DOM is ready
             try {
                if (typeof generatePlots === 'function') {
                     generatePlots();
                 } else {
                    console.error("generatePlots function not found. Make sure plotter script is loaded correctly.")
                }
             } catch (e) { console.error("Plot generation failed on load:", e);}

        });
        /* --- END OF TOGGLE SCRIPT --- */

        /* --- START OF PLOTTER SCRIPT --- */
        function generatePlots() {
            setTimeout(() => { // Give Plotly CDN a moment just in case
                 if (typeof Plotly === 'undefined') {
                     console.error("Plotly.js not loaded. Graphs cannot be generated.");
                     const plotDivs = document.querySelectorAll('.plot');
                     plotDivs.forEach(div => {
                         if (div) div.innerHTML = '<p style="color: #e74c3c; text-align: center; padding: 20px;">Graph library (Plotly) failed to load.</p>';
                     });
                     return;
                }
                 console.log("Plotly loaded, generating graphs...");

                const commonLayout = { template:'plotly_dark',xaxis:{title:{text:'v (m³/kg)',font:{color:'#bbb'}},zeroline:false,gridcolor:'#444',tickfont:{color:'#bbb'},linecolor:'#666'},yaxis:{title:{text:'P (kPa)',font:{color:'#bbb'}},zeroline:false,gridcolor:'#444',tickfont:{color:'#bbb'},linecolor:'#666'},margin:{l:70,r:30,t:60,b:60},showlegend:false,title:{font:{color:'#f0f0f0',size:14},y:0.95},font:{family:'Lato,sans-serif',color:'#e0e0e0'},paper_bgcolor:'#2a2a2a',plot_bgcolor:'#1e1e1e' };
                const commonLayoutTs = { ...commonLayout,xaxis:{...commonLayout.xaxis,title:{text:'s (kJ/kg·K)',font:{color:'#bbb'}}},yaxis:{...commonLayout.yaxis,title:{text:'T (°C or K)',font:{color:'#bbb'}}} };

                // Improved illustrative dome function
                 function getRealisticDome(x_axis='v', y_axis='P', substance='water') {
                     let dome_x, dome_y;
                    // Generic placeholder dome points
                     const generic_v = [0.001, 0.0015, 0.01, 0.1, 0.5, 1.5, 2.5, 1.5, 0.5, 0.1, 0.01, 0.0015, 0.001];
                     const generic_P = [10, 100, 500, 1000, 2000, 3000, 3000, 3000, 2000, 1000, 500, 100, 10];
                     const generic_s = [0, 1, 2, 3, 4, 5, 6, 7, 7.5, 6.5, 5, 3.5, 2, 1, 0];
                     const generic_T = [-50, 0, 50, 100, 150, 200, 250, 250, 250, 240, 200, 150, 100, 0, -50]; // C

                    dome_x = (x_axis === 'v') ? generic_v : generic_s;
                     dome_y = (y_axis === 'P') ? generic_P : generic_T;
                    // Substance-specific refinements could go here if needed
                     return { x:dome_x,y:dome_y,mode:'lines',line:{color:'#666',width:1.5,dash:'dot'},name:'Vapor Dome (Illustrative)',hoverinfo:'none' };
                }

                 function getStateTrace(x, y, name, text = '', color = '#e74c3c', symbol = 'circle', textpos = 'top right') { return { x:[x], y:[y], mode:'markers+text', marker:{color:color, size:9, symbol:symbol, line:{color:'#1e1e1e', width:1}}, name:name, text:[text || name], textposition:textpos, textfont:{color:'#ddd', size:10}, hoverinfo:'text'}; }
                 function getProcessTrace(x_coords, y_coords, shape = 'linear', dash_style = 'solid') { return { x:x_coords, y:y_coords, mode:'lines', line:{color:'#3498db', width:2, shape:shape, dash:dash_style }, hoverinfo:'none' }; }

                 // --- Specific Plot Functions ---
                 function plotQ1() { try { const d1=document.getElementById('q1-pv-diagram'), d2=document.getElementById('q1-ts-diagram'); if (!d1||!d2) return; const a={v:0.009,P:2000,s:5.6753,T:120}; const b={v:0.0050,P:2513,s:4.4207,T:120}; const c={v:0.0100,P:1654,s:0.7575,T:25+273.15}; const lpv={...commonLayout, title:{text:'Q1: P-v'}, yaxis:{...commonLayout.yaxis, type:'log'}, xaxis:{range:[-0.001, 0.012]}}; Plotly.newPlot(d1,[getRealisticDome('v','P','n2/r410a'),getStateTrace(a.v,a.P,'A','N2 SH'),getStateTrace(b.v,b.P,'B','N2 Mix'),getStateTrace(c.v,c.P,'C','R410A Mix','#ff7f0e')],lpv); const lts={...commonLayoutTs, title:{text:'Q1: T-s'}, yaxis:{title:{text:'T(K)'}}, xaxis:{range:[0.5, 6.0]}}; Plotly.newPlot(d2,[getRealisticDome('s','T','n2/r410a'),getStateTrace(a.s,a.T,'A','N2 SH'),getStateTrace(b.s,b.T,'B','N2 Mix'),getStateTrace(c.s,c.T,'C','R410A Mix','#ff7f0e')],lts); } catch(e){console.error("Plotting Q1 failed:", e, e.stack);} }
                function plotQ2() { try { const d1=document.getElementById('q2-pv-diagram'), d2=document.getElementById('q2-ts-diagram'); if (!d1||!d2) return; const P=200; const T1C=120.23,T2C=140.23; const s1=2.9293,v1=0.222; const s2=7.2295,v2=0.981; const sg1=7.1271,vg1=0.88578; const lpv={...commonLayout, title:{text:'Q2: P-v (H₂O)'}}; Plotly.newPlot(d1,[getRealisticDome('v','P','water'),getStateTrace(v1,P,'1'),getStateTrace(v2,P,'2'),getProcessTrace([v1,v2],[P,P])],lpv); const lts={...commonLayoutTs, title:{text:'Q2: T-s (H₂O)'}, yaxis:{title:{text:'T(°C)'}}}; Plotly.newPlot(d2,[getRealisticDome('s','T','water'),getStateTrace(s1,T1C,'1'),getStateTrace(s2,T2C,'2'),getProcessTrace([s1,sg1,s2],[T1C,T1C,T2C],'spline')],lts); } catch(e){console.error("Plotting Q2 failed:", e, e.stack);} }
                 function plotQ3() { try { const d=document.getElementById('q3-ts-diagram'); if (!d) return; const T_H=60, T_L=-20; const s1=1.8529, s2=4.8551, s3=s2, s4=s1; const lts={...commonLayoutTs, title:{text:'Q3: T-s (Ammonia Carnot)'}, yaxis:{title:{text:'T(°C)'}}}; Plotly.newPlot(d,[getRealisticDome('s','T','ammonia'),getStateTrace(s1,T_H,'1'),getStateTrace(s2,T_H,'2'),getStateTrace(s3,T_L,'3'),getStateTrace(s4,T_L,'4'),getProcessTrace([s1,s2],[T_H,T_H]),getProcessTrace([s2,s3],[T_H,T_L]),getProcessTrace([s3,s4],[T_L,T_L]),getProcessTrace([s4,s1],[T_L,T_H])],lts); } catch(e){console.error("Plotting Q3 failed:", e, e.stack);} }
                 function plotQ4() { try { const d1=document.getElementById('q4-pv-diagram'), d2=document.getElementById('q4-ts-diagram'); if (!d1||!d2) return; const T=125, P=232.1; const v1=0.001065,v2=0.77059; const s1=1.5812,s2=7.0774; const lpv={...commonLayout, title:{text:'Q4: P-v (H₂O Boil)'}}; Plotly.newPlot(d1,[getRealisticDome('v','P','water'),getStateTrace(v1,P,'1'),getStateTrace(v2,P,'2'),getProcessTrace([v1,v2],[P,P])],lpv); const lts={...commonLayoutTs, title:{text:'Q4: T-s (H₂O Boil)'}, yaxis:{title:{text:'T(°C)'}}}; Plotly.newPlot(d2,[getRealisticDome('s','T','water'),getStateTrace(s1,T,'1'),getStateTrace(s2,T,'2'),getProcessTrace([s1,s2],[T,T])],lts); } catch(e){console.error("Plotting Q4 failed:", e, e.stack);} }
                 function plotQ5() { try { const d1=document.getElementById('q5-pv-diagram'), d2=document.getElementById('q5-ts-diagram'); if (!d1||!d2) return; const T=200; const s1=2.3178,v1=0.001148,P1=10000; const s2=7.5066,v2=1.08049,P2=200; const lpv={...commonLayout, title:{text:'Q5: P-v (H₂O Isoth Exp)'}, yaxis:{type:'log'}}; Plotly.newPlot(d1,[getRealisticDome('v','P','water'),getStateTrace(v1,P1,'1'),getStateTrace(v2,P2,'2'),getProcessTrace([v1,v2],[P1,P2],'spline')],lpv); const lts={...commonLayoutTs, title:{text:'Q5: T-s (H₂O Isoth Exp)'}, yaxis:{title:{text:'T(°C)'}}}; Plotly.newPlot(d2,[getRealisticDome('s','T','water'),getStateTrace(s1,T,'1'),getStateTrace(s2,T,'2'),getProcessTrace([s1,s2],[T,T])],lts); } catch(e){console.error("Plotting Q5 failed:", e, e.stack);} }
                function plotQ11(){ try { const d=document.getElementById('q11-pv-diagram'); if (!d) return; const P1=190.2,v1=0.001504; const P2=800,v2=0.19716; const lpv={...commonLayout, title:{text:'Q11: P-v (Ammonia Spring)'}}; Plotly.newPlot(d,[getRealisticDome('v','P','ammonia'),getStateTrace(v1,P1,'1'),getStateTrace(v2,P2,'2'),getProcessTrace([v1,v2],[P1,P2])],lpv); } catch(e){console.error("Plotting Q11 failed:", e, e.stack);} }

                 // Call the plot functions
                 plotQ1(); plotQ2(); plotQ3(); plotQ4(); plotQ5(); plotQ11();
                 console.log("Plot generation functions called.");

            }, 150); // Adjust delay if plots still don't appear reliably
        }
         /* --- END OF PLOTTER SCRIPT --- */

    </script>

</body>
</html>